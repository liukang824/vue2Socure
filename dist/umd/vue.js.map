{"version":3,"file":"vue.js","sources":["../../src/util/index.js","../../src/observe/array.js","../../src/observe/dep.js","../../src/observe/index.js","../../src/state.js","../../src/compiler/parser-html.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/observe/watcher.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/create-element.js","../../src/render.js","../../src/initGlobalAPI/index.js","../../src/index.js"],"sourcesContent":["export function isObject(data){\r\n  return typeof data === 'object' && data !==null\r\n}\r\nexport function  def(data,key,value){\r\n  Object.defineProperty(data,key,{\r\n    configurable:false,//能否使用delete、能否需改属性特性、或能否修改访问器属性、，false为不可重新定义，默认值为true\r\n    enumerable:false,//对象属性是否可通过for-in循环，flase为不可循环，默认值为true\r\n    value\r\n  })\r\n}\r\n\r\n export function proxy(vm,source,key){\r\n   Object.defineProperty(vm,key,{\r\n    get(){\r\n      return vm[source][key]\r\n    },\r\n    set(newVlaue){\r\n      vm[source][key] = newVlaue\r\n    }\r\n   })\r\n\r\n}\r\n\r\n\r\nconst LIFECYCLE_HOOKS = [\r\n  'beforeCreate',\r\n  'created',\r\n  'beforeMount',\r\n  'mounted',\r\n  'beforeUpdate',\r\n  'updated',\r\n  'beforeDestroy',\r\n  'destroyed'\r\n]\r\n\r\nlet strats ={}\r\nfunction mergeHook(parentVal,childVal){\r\n  if(childVal){\r\n    if(parentVal){\r\n      return parentVal.concat(childVal);\r\n    }else{\r\n      \r\n      return [childVal];\r\n    }\r\n  }else{\r\n    return parentVal;\r\n  }\r\n}\r\nLIFECYCLE_HOOKS.forEach(hook=>{\r\n  strats[hook] = mergeHook\r\n})\r\n\r\nexport function  mergeOptions(parent,child){\r\n  const options = {}\r\n\r\n  for(let key in parent){\r\n    mergeField(key);\r\n  }\r\n  for(let key in child ){\r\n    if(!parent.hasOwnProperty(key)){  //如果已经和平过了 就不需要合并了\r\n      mergeField(key)\r\n    }\r\n  }\r\n    // 默认的合并策略 但是有些属性 需要有特殊的合并方式 生命周期的合并\r\n  function mergeField(key){\r\n    if(strats[key]){\r\n      return options[key] = strats[key](parent[key],child[key])\r\n    }\r\n    if(typeof parent[key] === 'object'  && typeof child[key] === 'object'){\r\n      options[key]={\r\n        ...parent[key],\r\n        ...child[key]\r\n      }\r\n      \r\n    }else  if(child[key] === null){\r\n        options[key] = parent[key]\r\n    }else{\r\n      options[key] = child[key];\r\n    }\r\n  }\r\n  return options;\r\n}\r\n\r\n\r\n","// 会对数组本身发生变化的一些方法  push shift  unshift pop reverse  sort  splice \r\n// slice() \r\n// value.__proto__ = arrayMethods  \r\n//  arrayMethods.__proto__ = oldArrayMethods\r\nlet oldArrayMethods = Array.prototype ;// 拿到数组原来的方法\r\nexport let arrayMethods = Object.create(oldArrayMethods)\r\n\r\nconst methods=[\r\n  'push',\r\n  'shift',\r\n  'unshift',\r\n  'pop',\r\n  'reverse',\r\n  'sort',\r\n  'splice'\r\n]\r\n  methods.forEach(method => {\r\n    arrayMethods[method] = function (...args) {\r\n      // aop  切片进程  装饰着模式\r\n      // oldArrayMethods 数组原型的方法  绑定this 执行 使重的方法 有效\r\n      const result =   oldArrayMethods[method].apply(this,args)  //对原型的this 绑定 调用原生的数组方法\r\n      let ob  = this.__ob__;\r\n      let inserted;  //当前用户插入的元素\r\n      switch (method) {\r\n        case 'push':\r\n        case 'unshift':\r\n          inserted = args\r\n          break;\r\n        case 'splice' :  //3个惨数 新增的属性 删除修改  功能\r\n         inserted = args.splice(2)\r\n        default:\r\n          break;\r\n      }\r\n      if(inserted) ob.observerArray(inserted) ;  //新增的属性继续观测\r\n      return result;\r\n    }\r\n  });","let id = 0\r\nclass Dep{\r\n  constructor(){\r\n    this.id = id++;\r\n    this.subs=[]\r\n  }\r\n  addSub(watcher){ //观察者模式\r\n    this.subs.push(watcher)\r\n  }\r\n  depend(){\r\n    // 让这个watcher 记住我当前的dep 如果没有watcher没有存过dep  dep 肯定也不会存watcher\r\n    Dep.target.addDep(this)\r\n  }\r\n  notify(){\r\n    this.subs.forEach(watcher=>watcher.update())  //调用当前watcher 的uodate方法\r\n  }\r\n\r\n\r\n}\r\nlet stack =[]\r\n\r\n// 目前可以做到watcher 保存和移除功能\r\nexport function pushTarget(watcher){\r\n  Dep.target = watcher\r\n  stack.push(watcher)\r\n}\r\n\r\nexport function popTarget(){\r\n  stack.pop()\r\n  Dep.target = stack[stack.length-1]\r\n}\r\n\r\nexport default Dep","import {isObject,def} from '../util/index'\r\nimport {arrayMethods} from './array'\r\nimport Dep from './dep.js';\r\nclass Observer{\r\n  constructor(value){\r\n   // vue 如果数据的层次过多 需要递归的去解析对象中的属性 一次的get和set\r\n    // value.__ob__ = this   //给每一个监控过的对象新增加一个__ob__ 属性\r\n    def(value,'__ob__',this)\r\n    if(Array.isArray(value)){  //初始化工作 \r\n        // 数组并不会将对索引进行观测因为谁导致性能问题\r\n      // 如果是数组的话 并不会对索引进行观测 因为消耗过大 \r\n      // 前端开发中很少操作索引  \r\n      value.__proto__ = arrayMethods  //装饰模式 \r\n      // 如果数组中放的是对象我再去监控\r\n      this.observerArray(value)\r\n    }else{\r\n      this.walk(value)\r\n    }\r\n    \r\n  }\r\n  walk(data){\r\n    let keys = Object.keys(data)\r\n    keys.forEach(item => {\r\n      defineReactive(data,item,data[item])  //定义响应式数据\r\n    });\r\n  }\r\n  observerArray(value){\r\n    value.forEach(item => {\r\n        observe(item)\r\n    });\r\n  }\r\n}\r\nfunction defineReactive(data,key,value){\r\n  let dep = new Dep  //这个dep 给对象使用\r\n      // 这里这个value可能是数组 也可能是对象 ，返回的结果是observer的实例，当前这个value对应的observer\r\n   observe(value) // 数组的observer实例\r\n    Object.defineProperty(data,key,{\r\n      configurable:true,\r\n      enumerable:true,\r\n      get(){ //  获取值的时候做一些操作 \r\n         // 每个属性都对应着自己的watcher\r\n         if(Dep.target){  //如果当前有watcher \r\n            dep.depend()  //意味着我要将watcher 存起来 \r\n\r\n         }\r\n        return value\r\n      },\r\n      set(newValue){\r\n        if(newValue===value)return;\r\n        //  监控的值是一个对象的话 再次监控observe(value)\r\n            observe(value)\r\n            value = newValue\r\n\r\n          dep.notify()  //通知依赖收集watcher 进行更新操作\r\n        }\r\n    })\r\n}\r\nexport function observe(data){\r\n  // 判断是不是object \r\n  let isobj = isObject (data)\r\n  if(!isobj)return;\r\n  return new Observer(data)\r\n}","import {observe} from './observe/index'\r\nimport { proxy} from './util/index'\r\nexport function initState(vm) {\r\n  const opts = vm.$options\r\n// vue 的数据来源 属性  方法  数据  计算属性  watch\r\n    if(opts.props){\r\n      initProps(vm)\r\n    }  \r\n    if(opts.methods){\r\n      initMethod(vm)\r\n    }\r\n    if(opts.data){\r\n        initDta(vm)\r\n    }\r\n    if(opts.computed){\r\n      initComputed(vm)\r\n    }\r\n    if(opts.watch){\r\n      initWatch(vm)\r\n    }\r\n  }\r\n\r\n  function initProps(){}\r\n  function initMethod(){}\r\n  function initDta(vm){\r\n      // 初始化数据\r\n    let data = vm.$options.data\r\n    data = vm._data = typeof data ===\"function\"?data.call(vm):data\r\n    // 对象劫持  用户改变了数据 我希望可以通知到 刷新页面 \r\n    // mvvm  收据变化可以驱动视图变化  \r\n    // Object.defineProperty  ()   给属性增加get 方法 set  方法 \r\n    // 对象劫持 用户改变了数据 我希望可以得到通知 =》 刷新页面\r\n    // 为了让用户更好的使用 我希望可以直接vm.xxx\r\n    // 做一个取值代理\r\n    for(let key in data){\r\n      // console.log(key,data);\r\n      proxy(vm,'_data',key )\r\n    }\r\n\r\n    observe(data)\r\n  }\r\n  function initComputed(){}\r\n  function initWatch(){}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // abc-aaa\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; // <aaa:asdads>\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\r\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >  <div>\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\r\n\r\n\r\n\r\n\r\nexport function parseHTML(html) {\r\n  let root = null; //ast 语法树的根\r\nlet currentParent; //识别当前父亲是谁\r\nlet stack = [];\r\nconst ELEMENT_TYPE = 1;\r\nconst TEXT_TYPE = 3;\r\n\r\nfunction createASTElement(tagName, attrs) {\r\n  return {\r\n    tag: tagName,\r\n    type: ELEMENT_TYPE,\r\n    children: [],\r\n    attrs,\r\n    parent: null\r\n  }\r\n}\r\n\r\n// 开始标签\r\nfunction start(tagName, attrs) {\r\n  let element = createASTElement(tagName, attrs)\r\n  if (!root) {\r\n    root = element;\r\n  }\r\n  // 把当前元素标记成父ast\r\n  currentParent = element;\r\n  stack.push(element)  //把标签存放在栈里\r\n}\r\nfunction end(tagName) {\r\n  let element = stack.pop() //拿到的是ast对象\r\n  //我要表示当前这个p属于这个div 的儿子\r\n  currentParent = stack[stack.length - 1]\r\n  if (currentParent) {\r\n    element.parent = currentParent\r\n    currentParent.children.push(element)  //实现了一个树的父子关系\r\n  }\r\n\r\n}\r\nfunction chars(text) {\r\n  text = text.replace(/\\s/g, '')  //去掉所有空字符串\r\n  if (text) {\r\n    currentParent.children.push({\r\n      text,\r\n      type: TEXT_TYPE\r\n    })\r\n  }\r\n}\r\n  // 不停的去截取html字符串\r\n  while (html) {\r\n    let textEnd = html.indexOf('<')\r\n    if (textEnd == 0) {\r\n      // 当前索引为0 肯定是一个开始标签 \r\n      let startTagMatch = parseStartTag()   // 通过这个方法获取匹配的结果 tagname attrs\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs)\r\n        continue; // 如果开始标签匹配完毕后 继续下一次 匹配\r\n      }\r\n      let endTagMatch = html.match(endTag);\r\n      if (endTagMatch) {\r\n        advance(endTagMatch[0].length);  //删除结束标签\r\n        end(endTagMatch[1])\r\n        continue;\r\n      }\r\n    }\r\n    let text;\r\n    if (textEnd >= 0) {\r\n      text = html.substring(0, textEnd)\r\n    }\r\n    if (text) {\r\n      advance(text.length)  //删除文本属性\r\n      chars(text)\r\n    }\r\n  }\r\n\r\n  // 删除标签 \r\n  function advance(n) {\r\n    html = html.substring(n);\r\n\r\n  }\r\n  // 通过这个方法获取到匹配的结果 tagName,attrs\r\n  function parseStartTag() {\r\n    let start = html.match(startTagOpen)\r\n    if (start) {\r\n      const match = {\r\n        tagName: start[1],\r\n        attrs: []\r\n      }\r\n      advance(start[0].length)  //删除已经匹配的标签\r\n      let end, attr;  //匹配结束标签  匹配属性\r\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n        // 将属性解析 \r\n        advance(attr[0].length)  // 删除属性 \r\n        match.attrs.push({\r\n          name: attr[1],\r\n          value: attr[3] || attr[4] || attr[5]\r\n        })\r\n      }\r\n      if (end) {\r\n        advance(end[0].length)\r\n        return match;\r\n      }\r\n\r\n\r\n    }\r\n\r\n  }\r\n\r\n  return root;\r\n}\r\n","\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\r\n// generate[{name:'id',value:'app'},{}]  {id:app,a:1,b:2}\r\n export function generate(el) {\r\n  let children = genChildren(el)  //生成子模板 \r\n  let code = `_c(\"${el.tag}\",${el.attrs.length?genProps(el.attrs):'undefined'}${children?`,${children}` :''})`\r\n  return code;\r\n}\r\n\r\n\r\nfunction genChildren(el){\r\n  let children = el.children \r\n  if(children && children.length >0){\r\n    return `${children.map(c=>gen(c)).join(',')}`\r\n  }else{\r\n    return false\r\n  }\r\n}\r\nfunction gen(node){\r\n  if(node.type==1){\r\n      return generate(node)\r\n  }else {\r\n    let text = node.text\r\n    let tokens = [];\r\n    let match, index;\r\n    // 每次的偏移量 buffer.split()\r\n    let lastIndex  = defaultTagRE.lastIndex = 0 // 只要是全局匹配 就需要将lastIndex每次匹配的时候调到0处\r\n    while (match = defaultTagRE.exec(text)) {\r\n          index = match.index\r\n          if(index > lastIndex){\r\n            tokens.push(JSON.stringify(text.slice(lastIndex,index)))\r\n          }\r\n            tokens.push(`_s(${match[1].trim()})`)\r\n            lastIndex = index+match[0].length\r\n\r\n    }\r\n    if(lastIndex < text.length){\r\n      tokens.push(JSON.stringify(text.split(lastIndex)))\r\n    }\r\n\r\n    return `_v(${tokens.join('+')})`;\r\n\r\n\r\n  }\r\n}\r\nfunction genProps(attrs){\r\n// 处理属性 拼接成属性的字符串\r\n  let str = ''\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    let attr = attrs[i]\r\n    if(attr.name === 'style'){\r\n         // style=\"color: red;fontSize:14px\" => {style:{color:'red'},id:name,}\r\n      let obj = {}\r\n       attr.value.split(';').forEach(item=>{\r\n                let [key,value] = item.split(':');\r\n                obj[key] = value\r\n            });\r\n      attr.value = obj;\r\n    }\r\n    str+= `${attr.name}:${JSON.stringify(attr.value)},`\r\n    \r\n    \r\n  }\r\n  return `{${str.slice(0,-1)}}`;\r\n\r\n}\r\n// ast语法树 是用对象来描述原生语法的   虚拟dom 用对象来描述dom节点的\r\n// ?: 匹配不捕获\r\n// argumens[0] = 匹配到的标签  arguments[1] 匹配到的标签名字\r\n\r\n\r\n//   hellpo\r\n//      <p></p>\r\n// </div>\r\n\r\n\r\n// let root = {\r\n//     tag:'div',\r\n//     attrs:[{name:'id',value:'app'}],\r\n//     parent:null,\r\n//     type:1,\r\n//     children:[{\r\n//         tag:'p',\r\n//         attrs:[],\r\n//         parent:root,\r\n//         type:1,\r\n//         children:[\r\n//             {\r\n//                 text:'hello',\r\n//                 type:3\r\n//             }\r\n//         ]\r\n//     }]\r\n// }\r\n","import {parseHTML} from './parser-html'\r\nimport {generate} from './generate';\r\n// ast 语法树 是用对象来描述js语法的  虚拟dom 用对象来描dom述节点的 \r\n// argumens[0] = 匹配到的标签  arguments[1] 匹配到的标签名字\r\n\r\nexport function compileToFunction(template){\r\n  // 1 解析字符串将HTML 字符串 => ast  语法\r\n  let root  = parseHTML(template) \r\n  // 需要将ast 语法树生成最终的render函数  就是字符串拼接（模板引擎）\r\n  let code = generate(root)\r\n\r\n  // 核心思路就是将模板转化成 下面这段字符串\r\n    //  <div id=\"app\"><p>hello {{name}}</p> hello</div>\r\n    // 将ast树 再次转化成js的语法\r\n    //  _c(\"div\",{id:app},_c(\"p\",undefined,_v('hello' + _s(name) )),_v('hello')) \r\n    // 所有的模板引擎实现 都需要new Function + with\r\n\r\n    let renderFn = new Function(`with(this){ return ${code}}`); \r\n  // return function render(){\r\n\r\n  // }\r\n    return renderFn;\r\n}\r\n\r\n","import {\r\n  pushTarget,\r\n  popTarget\r\n} from './dep.js';\r\nlet id = 0\r\nclass Watcher{\r\n    constructor(vm,exprOrFn,callback,options){\r\n        this.vm = vm;\r\n        this.callback = callback;\r\n        this.options = options;\r\n        this.id = id++;\r\n        this.getter = exprOrFn; // 将内部传过来的回调函数 放到getter属性上\r\n        this.depsId = new Set() // es6中的集合 （不能放重复项）\r\n        this.deps = []\r\n        this.get();\r\n    }\r\n    addDep(dep){  // watcher 里不能放重复的dep  dep里不能放重复的watcher\r\n        let id = this.id\r\n        if(!this.depsId.has(id)){\r\n          this.depsId.add(id)\r\n          this.deps.push(id)\r\n          dep.addSub(this); //存当前watcher\r\n        }\r\n\r\n    }\r\n    get(){\r\n        pushTarget(this) // 把当前实例传进进去  存当前watcher\r\n        this.getter();\r\n        popTarget() //移除watcher\r\n\r\n    }\r\n    update(){\r\n      this.get();\r\n    }\r\n    run(){\r\n      this.get();\r\n    }\r\n}\r\n\r\nexport default Watcher","export function patch(oldVnode,vnode){\r\n  // 1 判断是否是初次渲染\r\n  const  isRealElement = oldVnode.nodeType\r\n  if(isRealElement){\r\n    const oldElm = oldVnode  // id=app\r\n    const parentElm = oldElm.parentNode; // body\r\n    let el = createElm(vnode)\r\n    parentElm.insertBefore(el,oldElm.nextSibling)\r\n    parentElm.removeChild(oldElm);\r\n    return el;\r\n  }\r\n  // 递归创建真实节点  替换掉老节点\r\n\r\n}\r\nfunction createElm(vnode){// 根据虚拟节点创建真是的节点 \r\n  let {tag,data,key,children,text} = vnode\r\n  if(typeof tag === 'string'){\r\n    vnode.el = document.createElement(tag)\r\n    updateProperties(vnode);\r\n    children.forEach(child=>{ // 递归创建儿子节点，将儿子节点扔到父节点中\r\n      return vnode.el.appendChild(createElm(child))\r\n  })\r\n\r\n  }else{\r\n    // 虚拟dom上映射真实dom  方便后续更新\r\n    vnode.el = document.createTextNode(text)\r\n  }\r\n    // 如果不是标签就是文本\r\n  return vnode.el;\r\n\r\n}\r\nfunction updateProperties(vnode){\r\n  let newProps = vnode.data;\r\n  let el = vnode.el;\r\n  for(let key in newProps){\r\n      if(key === 'style'){\r\n          for(let styleName in newProps.style){\r\n              el.style[styleName] = newProps.style[styleName];\r\n          }\r\n      }else if(key === 'class'){\r\n          el.className = newProps.class;\r\n      }else{\r\n          el.setAttribute(key,newProps[key]);\r\n      }\r\n  }\r\n}","import Watcher from './observe/watcher.js'\r\nimport {patch}  from './vdom/patch'\r\n// \r\nexport function lifecycleMixin(Vue){\r\n  Vue.prototype._updata = function (vnode) {\r\n      // 创建真是的dom 节点\r\n      const vm = this\r\n      // console.log(vm,vnode);\r\n      vm.$el = patch(vm.$el,vnode)\r\n  }\r\n\r\n}\r\nexport function mountComponent(vm,el){\r\n  const options = vm.$options\r\n  vm.$el = el  // 真是的dom元素\r\n\r\n\r\n  // Watcher 就是来渲染的\r\n  // vm._render 通过解析render方法 渲染出虚拟dom _c_v_s \r\n  // vm._update 通过虚拟dom 创建真是的dom\r\n  callHook(vm,'beforeMount');\r\n  // 渲染页面\r\n  let  updataComponent = () =>{  //无论渲染还是更新都会执行此方法\r\n      // 返回的是虚拟dom\r\n      vm._updata(vm._render())\r\n  }\r\n\r\n  // 渲染 Watcher  没一个组件都有一个Watcher  \r\n  new Watcher(vm,updataComponent,()=>{},true)   //true  表示是一个渲染过程 \r\n  callHook(vm,'mounted');\r\n}\r\n\r\nexport function callHook(vm,hook){\r\n  const handlers = vm.$options[hook]; // [fn,fn,fn]\r\n  if(handlers){ // 找到对应的钩子依次执行\r\n      for(let i =0; i< handlers.length;i++){\r\n          handlers[i].call(vm);\r\n      }\r\n  }\r\n}","\r\n// import { initState } from './state'\r\n// import { compileToFunction } from './compiler/index.js'\r\n// import { mountComponent } from './lifecycle.js'\r\n// export function initMixin(Vue) {\r\n//   Vue.prototype._init = function (options) {\r\n//     // 数据劫持 \r\n//     const vm = this  // vue 中使用this.$options 指代表就是用传递的属性\r\n//     vm.$options = options\r\n//     //  初始化状态\r\n//     initState(vm)  //分割代码\r\n\r\n\r\n//     // 如果有用户传入了el 属性 需要将页面渲染出来\r\n//     // 如果用户传入了el 就要实现挂在流程\r\n//     if (vm.$options.el) {\r\n//       vm.$mount(vm.$options.el);\r\n//     }\r\n//   }\r\n//   Vue.prototype.$mount = function (el) {\r\n//     //1 保存this\r\n//     const vm = this\r\n//     const options = vm.$options\r\n//     el = document.querySelector(el)\r\n\r\n\r\n//     //  默认会先查找有没有render 方法 再去查找有没有 template  最后查找 el  \r\n//     if (!options.render) {\r\n//       let template = options.template\r\n//       if (!template && el) {\r\n//         template = el.outerHTML;\r\n//       }\r\n//       const render = compileToFunction(template);\r\n//       //我们需要将template转成render 方法 2.0  虚拟dom\r\n//       // 把render  方法放到options\r\n//       options.render = render\r\n//       // console.log(template);\r\n     \r\n    \r\n//     }\r\n//      // 挂在当前组件 \r\n//     mountComponent(vm,el)\r\n//   }\r\n// } \r\nimport {initState} from './state'\r\n\r\nimport {compileToFunction} from './compiler/index.js'\r\n\r\nimport {mountComponent,callHook} from './lifecycle'\r\nimport {mergeOptions} from './util/index';\r\n// 在原型上添加一个init方法\r\nexport function initMixin(Vue){\r\n    // 初始化流程\r\n    Vue.prototype._init = function (options) {\r\n        // 数据的劫持\r\n        const vm = this; // vue中使用 this.$options 指代的就是用户传递的属性\r\n           // 将用户传递的 和 全局的进行一个合并 \r\n        vm.$options = mergeOptions(vm.constructor.options,options)\r\n        // vm.$options = options;\r\n        callHook(vm,'beforeCreate')\r\n        // 初始化状态\r\n        initState(vm); // 分割代码\r\n        callHook(vm,'created');\r\n        // 如果用户传入了el属性 需要将页面渲染出来\r\n        // 如果用户传入了el 就要实现挂载流程\r\n\r\n        if(vm.$options.el){\r\n            vm.$mount(vm.$options.el);\r\n        }\r\n    }\r\n    Vue.prototype.$mount = function (el) {\r\n        const vm = this;\r\n        const options = vm.$options;\r\n        el = document.querySelector(el); \r\n        // 默认先会查找有没有render方法，没有render 会 采用template template也没有就用el中的内容\r\n        if(!options.render){\r\n            // 对模板进行编译\r\n            let template = options.template; // 取出模板\r\n            if(!template && el){\r\n                template = el.outerHTML;\r\n            }\r\n            const render = compileToFunction(template);\r\n            options.render = render;\r\n            // 我们需要将template 转化成render方法 vue1.0 2.0虚拟dom \r\n        }\r\n        \r\n        // 渲染当前的组件 挂载这个组件\r\n        mountComponent(vm,el);\r\n    }\r\n}","export function createElement(tag,data={},...children){\r\n    let key = data.key\r\n    if(key){\r\n      delete data.key\r\n    }\r\n    return vnode(tag,data,key,children,undefined)\r\n} \r\nexport function  createTextNode(text){\r\n    return vnode(undefined,undefined,undefined,undefined,text)\r\n}\r\nfunction vnode(tag, data, key, children, text) {\r\n\r\n  return {\r\n      tag,\r\n      data,\r\n      key,\r\n      children,\r\n      text\r\n  }\r\n}\r\n// 虚拟节点 就是通过_c _v 实现用对象来描述dom的操作 （对象）\r\n\r\n// 1) 将template转换成ast语法树-> 生成render方法 -> 生成虚拟dom -> 真实的dom\r\n//  重新生成虚拟dom -> 更新dom","import {createElement,createTextNode} from './vdom/create-element'\r\n\r\nexport function renderMixin(Vue){\r\n\r\n  // 创建redner 函数 \r\n  Vue.prototype._c = function (){\r\n    return createElement(...arguments)  //tag data children1 children2\r\n  }\r\n  Vue.prototype._v = function (text){\r\n    return createTextNode(text)\r\n  }\r\n  Vue.prototype._s = function (val){\r\n    return val  == null ? '':(typeof val  === 'object' ?JSON.stringify(val) : val);\r\n\r\n  }\r\n  Vue.prototype._render = function (){\r\n     // console.log(111);\r\n      // _c 创建元素节点\r\n      // _v 创建文本的虚拟节点\r\n      // _s JSON.stringfy\r\n    const vm = this\r\n    const {render} = vm.$options\r\n    let vnode = render.call(vm)  //去实例上取值\r\n    return vnode;\r\n  }\r\n\r\n}","import {mergeOptions} from '../util/index'\r\nexport function initGlobalAPI(Vue){\r\n  // 整合所有相关Api 内容\r\n  Vue.options = {}\r\n  Vue.mixin = function (mixin){\r\n    this.options = mergeOptions(this.options,mixin)\r\n  }\r\n\r\n\r\n}","// Vue的核心代码 只是Vue的一个声明\r\nimport {initMixin} from './init';\r\nimport {renderMixin} from './render';\r\nimport {lifecycleMixin} from './lifecycle';\r\nimport {initGlobalAPI} from './initGlobalAPI/index';\r\n\r\nfunction Vue(options){\r\n    // 进行Vue的初始化操作\r\n    this._init(options); \r\n}\r\n// 通过引入文件的方式 给Vue原型上添加方法\r\n\r\ninitMixin(Vue); // 给Vue原型上添加一个_init方法\r\nrenderMixin(Vue);\r\nlifecycleMixin(Vue);\r\n\r\ninitGlobalAPI(Vue) //初始化全局Api \r\nexport default Vue\r\n"],"names":["isObject","data","def","key","value","Object","defineProperty","configurable","enumerable","proxy","vm","source","get","set","newVlaue","LIFECYCLE_HOOKS","strats","mergeHook","parentVal","childVal","concat","forEach","hook","mergeOptions","parent","child","options","mergeField","hasOwnProperty","oldArrayMethods","Array","prototype","arrayMethods","create","methods","method","args","result","apply","ob","__ob__","inserted","splice","observerArray","id","Dep","subs","watcher","push","target","addDep","update","stack","pushTarget","popTarget","pop","length","Observer","isArray","__proto__","walk","keys","item","defineReactive","observe","dep","depend","newValue","notify","isobj","initState","opts","$options","props","initDta","computed","watch","_data","call","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","root","currentParent","ELEMENT_TYPE","TEXT_TYPE","createASTElement","tagName","attrs","tag","type","children","start","element","end","chars","text","replace","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","defaultTagRE","generate","el","genChildren","code","genProps","map","c","gen","join","node","tokens","index","lastIndex","exec","JSON","stringify","slice","trim","split","str","i","obj","compileToFunction","template","renderFn","Function","Watcher","exprOrFn","callback","getter","depsId","Set","deps","has","add","addSub","patch","oldVnode","vnode","isRealElement","nodeType","oldElm","parentElm","parentNode","createElm","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","appendChild","createTextNode","newProps","styleName","style","className","setAttribute","lifecycleMixin","Vue","_updata","$el","mountComponent","callHook","updataComponent","_render","handlers","initMixin","_init","constructor","$mount","querySelector","render","outerHTML","undefined","renderMixin","_c","arguments","_v","_s","val","initGlobalAPI","mixin"],"mappings":"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"}