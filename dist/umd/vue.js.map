{"version":3,"file":"vue.js","sources":["../../src/util/index.js","../../src/observe/array.js","../../src/observe/index.js","../../src/state.js","../../src/init.js","../../src/index.js"],"sourcesContent":["export function isObject(data){\r\n  return typeof data === 'object' && data !==null\r\n}\r\n","// 会对数组本身发生变化的一些方法  push shift  unshift pop reverse  sort  splice \r\n// slice() \r\n// value.__proto__ = arrayMethods  \r\n//  arrayMethods.__proto__ = oldArrayMethods\r\nlet oldArrayMethods = Array.prototype ;// 拿到数组原来的方法\r\nexport let arrayMethods = Object.create(oldArrayMethods)\r\n\r\nconst methods=[\r\n  'push',\r\n  'shift',\r\n  'unshift',\r\n  'pop',\r\n  'reverse',\r\n  'sort',\r\n  'splice'\r\n]\r\n  methods.forEach(method => {\r\n    arrayMethods[method] = function (...args) {\r\n      // aop  切片进程  装饰着模式\r\n      oldArrayMethods[method].apply(this,args)  //对原型的this 绑定 调用原生的数组方法\r\n    }\r\n  });","import {isObject} from '../util/index'\r\nimport {arrayMethods} from './array'\r\nclass Observer{\r\n  constructor(value){\r\n    // 如果收据的层次过多 需要递归的去解析对象中的属性 依次在呢个价set 和get  方法 \r\n    if(Array.isArray(value)){\r\n      // 如果是数组的话 并不会对索引进行观测 因为消耗过大 \r\n      // 前端开发中很少操作索引  \r\n      value.__proto__ = observerArray  //装饰模式 \r\n      // 如果数组中放的是对象我再去监控\r\n      this.observerArray(value)\r\n    }else{\r\n      this.walk(value)\r\n    }\r\n    \r\n  }\r\n  walk(data){\r\n    let keys = Object.keys(data)\r\n    keys.forEach(item => {\r\n      defineReactive(data,item,data[item])  //定义响应式数据\r\n    });\r\n  }\r\n  observerArray(value){\r\n    value.forEach(item => {\r\n        observe(item)\r\n    });\r\n  }\r\n}\r\nfunction defineReactive(data,key,value){\r\n  observe(value)\r\n    Object.defineProperty(data,key,{\r\n      get(){\r\n        return value\r\n      },\r\n      set(newValue){\r\n        if(newValue===value)return;\r\n        //  监控的值是一个对象的话 再次监控observe(value)\r\n            observe(value)\r\n            value = newValue\r\n        }\r\n    })\r\n}\r\nexport function observe(data){\r\n  // 判断是不是object \r\n  let isobj = isObject (data)\r\n  if(!isobj)return;\r\n  return new Observer(data)\r\n}","import {observe} from './observe/index'\r\nexport function initState(vm) {\r\n  const opts = vm.$options\r\n// vue 的数据来源 属性  方法  数据  计算属性  watch\r\n    if(opts.props){\r\n      initProps(vm)\r\n    }  \r\n    if(opts.methods){\r\n      initMethod(vm)\r\n    }\r\n    if(opts.data){\r\n        initDta(vm)\r\n    }\r\n    if(opts.computed){\r\n      initComputed(vm)\r\n    }\r\n    if(opts.watch){\r\n      initWatch(vm)\r\n    }\r\n  }\r\n\r\n  function initProps(){}\r\n  function initMethod(){}\r\n  function initDta(vm){\r\n      // 初始化数据\r\n    let data = vm.$options.data\r\n    data = vm._data = typeof data ===\"function\"?data.call(vm):data\r\n    // 对象劫持  用户改变了数据 我希望可以通知到 刷新页面 \r\n    // mvvm  收据变化可以驱动视图变化  \r\n    // Object.defineProperty  ()   给属性增加get 方法 set  方法 \r\n    observe(data)\r\n  }\r\n  function initComputed(){}\r\n  function initWatch(){}","\r\nimport {initState} from './state'\r\nexport function initMixin(Vue) {\r\n  Vue.prototype._init = function(options){\r\n    // 数据劫持 \r\n    const vm = this  // vue 中使用this.$options 指代表就是用传递的属性\r\n    vm.$options = options \r\n    //  初始化状态\r\n    initState(vm)\r\n  }\r\n} ","import {initMixin} from './init'\r\n\r\nfunction  Vue(options) {\r\n  // 初始化\r\n    this._init(options)\r\n}\r\ninitMixin(Vue)\r\n\r\n\r\nexport default Vue"],"names":["isObject","data","oldArrayMethods","Array","prototype","arrayMethods","Object","create","methods","forEach","method","args","apply","Observer","constructor","value","isArray","__proto__","observerArray","walk","keys","item","defineReactive","observe","key","defineProperty","get","set","newValue","isobj","initState","vm","opts","$options","props","initDta","computed","watch","_data","call","initMixin","Vue","_init","options"],"mappings":"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"}