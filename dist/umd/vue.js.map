{"version":3,"file":"vue.js","sources":["../../src/util/index.js","../../src/observe/index.js","../../src/state.js","../../src/init.js","../../src/index.js"],"sourcesContent":["export function isObject(data){\r\n  return typeof data === 'object' && data !==null\r\n}\r\n","import {isObject} from '../util/index'\r\nimport {arrayMethods} from './array'\r\nclass Observer{\r\n  constructor(value){\r\n    // 如果收据的层次过多 需要递归的去解析对象中的属性 依次在呢个价set 和get  方法 \r\n    if(Array.isArray(value)){\r\n      // 如果是数组的话 并不会对索引进行观测 因为消耗过大 \r\n      // 前端开发中很少操作索引  \r\n      value.__proto__ = observerArray  //装饰模式 \r\n      // 如果数组中放的是对象我再去监控\r\n      this.observerArray(value)\r\n    }else{\r\n      this.walk(value)\r\n    }\r\n    \r\n  }\r\n  walk(data){\r\n    let keys = Object.keys(data)\r\n    keys.forEach(item => {\r\n      defineReactive(data,item,data[item])  //定义响应式数据\r\n    });\r\n  }\r\n  observerArray(value){\r\n    value.forEach(item => {\r\n        observe(item)\r\n    });\r\n  }\r\n}\r\nfunction defineReactive(data,key,value){\r\n  observe(value)\r\n    Object.defineProperty(data,key,{\r\n      get(){\r\n        return value\r\n      },\r\n      set(newValue){\r\n        if(newValue===value)return;\r\n        //  监控的值是一个对象的话 再次监控observe(value)\r\n            observe(value)\r\n            value = newValue\r\n        }\r\n    })\r\n}\r\nexport function observe(data){\r\n  // 判断是不是object \r\n  let isobj = isObject (data)\r\n  if(!isobj)return;\r\n  return new Observer(data)\r\n}","import {observe} from './observe/index'\r\nexport function initState(vm) {\r\n  const opts = vm.$options\r\n// vue 的数据来源 属性  方法  数据  计算属性  watch\r\n    if(opts.props){\r\n      initProps(vm)\r\n    }  \r\n    if(opts.methods){\r\n      initMethod(vm)\r\n    }\r\n    if(opts.data){\r\n        initDta(vm)\r\n    }\r\n    if(opts.computed){\r\n      initComputed(vm)\r\n    }\r\n    if(opts.watch){\r\n      initWatch(vm)\r\n    }\r\n  }\r\n\r\n  function initProps(){}\r\n  function initMethod(){}\r\n  function initDta(vm){\r\n      // 初始化数据\r\n    let data = vm.$options.data\r\n    data = vm._data = typeof data ===\"function\"?data.call(vm):data\r\n    // 对象劫持  用户改变了数据 我希望可以通知到 刷新页面 \r\n    // mvvm  收据变化可以驱动视图变化  \r\n    // Object.defineProperty  ()   给属性增加get 方法 set  方法 \r\n    observe(data)\r\n  }\r\n  function initComputed(){}\r\n  function initWatch(){}","\r\nimport {initState} from './state'\r\nexport function initMixin(Vue) {\r\n  Vue.prototype._init = function(options){\r\n    // 数据劫持 \r\n    const vm = this  // vue 中使用this.$options 指代表就是用传递的属性\r\n    vm.$options = options \r\n    //  初始化状态\r\n    initState(vm)\r\n  }\r\n} ","import {initMixin} from './init'\r\n\r\nfunction  Vue(options) {\r\n  // 初始化\r\n    this._init(options)\r\n}\r\ninitMixin(Vue)\r\n\r\n\r\nexport default Vue"],"names":["isObject","data","Observer","constructor","value","Array","isArray","__proto__","observerArray","walk","keys","Object","forEach","item","defineReactive","observe","key","defineProperty","get","set","newValue","isobj","initState","vm","opts","$options","props","methods","initDta","computed","watch","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":"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"}